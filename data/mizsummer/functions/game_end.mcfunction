#未脱出もとい未捕獲の逃走者が0人のタイミングで実行
tag @e[tag=master] remove playing
tag @e[tag=master] remove timelimit
scoreboard players reset @a get_revive
kill @e[tag=revive]
title @a title [{"text":"F","color":"gold","bold":true},{"text":"inish","color":"white"}]
execute as @a at @s run playsound minecraft:entity.ender_dragon.growl master @s ~ ~ ~ 0.1 1
tellraw @a [{"text":"ゲーム終了！","color":"light_purple"}]
execute if entity @a[tag=escaped] run tellraw @a [{"text":"脱出成功者: ","color":"gold"},{"selector":"@a[tag=escaped]","color":"green"}]
execute unless entity @a[tag=escaped] run tellraw @a [{"text":"脱出成功者: ","color":"gold"},{"text":"なし","color":"red","bold":true}]
tellraw @a [{"text":"ターボばばあ: ","color":"gold"},{"selector":"@a[tag=BBA]","color":"green"}]
tellraw @a [{"text":"ターボばばあが捕まえた回数:  ","color":"gold"},{"score":{"name":"@a[tag=BBA,limit=1]","objective":"catch_count"},"color":"green"},{"text":"回","color":"green"}]
clear @a carrot_on_a_stick
clear @a warped_fungus_on_a_stick
clear @a white_dye
clear @a lime_dye
worldborder warning distance 0
clear @a[tag=op] written_book
give @a[tag=op] written_book{pages:['["",{"text":"<play>\\n\\n"},{"text":"[\\u3070\\u3070\\u3042\\u3092\\u9078\\u3076(\\u30e9\\u30f3\\u30c0\\u30e0)]","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:bbapick"},"hoverEvent":{"action":"show_text","contents":"\\u3070\\u3070\\u3042\\u3092\\u62bd\\u9078\\u306b\\u53c2\\u52a0\\u3057\\u3066\\u3044\\u308b\\u30d7\\u30ec\\u30a4\\u30e4\\u30fc\\u304b\\u3089\\u30e9\\u30f3\\u30c0\\u30e0\\u3067\\u9078\\u3073\\u307e\\u3059\\u3002"}},{"text":"\\n\\n","color":"reset"},{"text":"[\\u53c2\\u52a0\\u8005\\u30c1\\u30a7\\u30c3\\u30af]","color":"dark_green","clickEvent":{"action":"run_command","value":"/function mizsummer:check"},"hoverEvent":{"action":"show_text","contents":"\\u3070\\u3070\\u3042\\u62bd\\u9078\\u53c2\\u52a0\\u8005\\u3084\\u89b3\\u6226\\u8005\\u3092\\u78ba\\u8a8d\\u3057\\u307e\\u3059\\u3002"}},{"text":"\\n\\n","color":"reset"},{"text":"[\\u5168\\u54e1\\u3092\\u30c6\\u30ec\\u30dd\\u30fc\\u30c8]","color":"gold","clickEvent":{"action":"run_command","value":"/tp @a @s"},"hoverEvent":{"action":"show_text","contents":"\\u5168\\u54e1\\u3092\\u4f7f\\u7528\\u5834\\u6240\\u306b\\u30c6\\u30ec\\u30dd\\u30fc\\u30c8\\u3057\\u307e\\u3059\\u3002"}},{"text":"\\n\\n","color":"reset"},{"text":"[\\u30b2\\u30fc\\u30e0\\u3092\\u958b\\u59cb\\u3059\\u308b]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:start"},"hoverEvent":{"action":"show_text","contents":"\\u3070\\u3070\\u3042\\u3092\\u89e3\\u304d\\u653e\\u3061\\u307e\\u3059\\u3002"}},{"text":"\\n\\n","color":"reset"},{"text":"[\\u30b2\\u30fc\\u30e0\\u3092\\u5f37\\u5236\\u7d42\\u4e86]","color":"red","clickEvent":{"action":"run_command","value":"/function mizsummer:game_end"},"hoverEvent":{"action":"show_text","contents":"\\u30b2\\u30fc\\u30e0\\u3092\\u4e2d\\u65ad\\u3057\\u307e\\u3059\\u3002\\u554f\\u984c\\u304c\\u767a\\u751f\\u3057\\u305f\\u969b\\u306b\\u3054\\u5229\\u7528\\u304f\\u3060\\u3055\\u3044\\u3002"}},{"text":"\\n\\n","color":"reset"},{"text":"[\\u62bd\\u9078\\u30a2\\u30a4\\u30c6\\u30e0\\u518d\\u914d\\u5e03]","color":"dark_purple","clickEvent":{"action":"run_command","value":"/function mizsummer:reload"},"hoverEvent":{"action":"show_text","contents":"\\u53c2\\u52a0\\u62bd\\u9078\\u7528\\u30a2\\u30a4\\u30c6\\u30e0\\u3092\\u5168\\u54e1\\u306b\\u518d\\u914d\\u5e03\\u3057\\u307e\\u3059"}}]','["",{"text":"<settings>\\n\\u30fb\\u8131\\u51fa\\u53ef\\u80fd\\u307e\\u3067\\u306e\\u6642\\u9593\\n"},{"text":"[0s]","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_0s"},"hoverEvent":{"action":"show_text","contents":"\\u5373\\u6642\\u8131\\u51fa\\u53ef\\u80fd"}},{"text":" ","color":"green"},{"text":"[2min]","color":"dark_green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_2m"},"hoverEvent":{"action":"show_text","contents":"2\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":" ","color":"green"},{"text":"[4min]","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_4m"},"hoverEvent":{"action":"show_text","contents":"4\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":" ","color":"green"},{"text":"[6min]","color":"dark_green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_6m"},"hoverEvent":{"action":"show_text","contents":"6\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":" ","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_6m"}},{"text":"[8min]","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_8m"},"hoverEvent":{"action":"show_text","contents":"8\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef (\\u30c7\\u30d5\\u30a9\\u30eb\\u30c8)"}},{"text":"\\n","color":"reset"},{"text":"[10min]","color":"dark_green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_10m"},"hoverEvent":{"action":"show_text","contents":"10\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":" ","color":"green"},{"text":"[12min]","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_12m"},"hoverEvent":{"action":"show_text","contents":"12\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":" ","color":"green"},{"text":"[14min]","color":"dark_green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_14m"},"hoverEvent":{"action":"show_text","contents":"14\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":" ","color":"green"},{"text":"[16min]","color":"green","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_16m"},"hoverEvent":{"action":"show_text","contents":"16\\u5206\\u9593\\u8131\\u51fa\\u4e0d\\u53ef"}},{"text":"\\n","color":"reset"},{"text":"[unlimited]","color":"gray","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/time_unlimited"},"hoverEvent":{"action":"show_text","contents":"\\u8131\\u51fa\\u4e0d\\u53ef\\u80fd(\\u30c7\\u30d0\\u30c3\\u30b0\\u7528)"}},{"text":"\\n\\n\\u30fb\\u9003\\u8d70\\u8005\\u306e\\u521d\\u671f\\u6b8b\\u6a5f\\n","color":"reset"},{"text":"[-1]","color":"red","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/lives_decrease"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u521d\\u671f\\u6b8b\\u6a5f\\u30921\\u6e1b\\u3089\\u3057\\u307e\\u3059\\u3002\\u8ca0\\u306e\\u5024\\u306b\\u306f\\u306a\\u308a\\u307e\\u305b\\u3093\\u3002"}},{"text":" ","color":"reset"},{"text":"[default]","color":"gold","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/lives_default"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u521d\\u671f\\u6b8b\\u6a5f\\u30921\\u306b\\u8a2d\\u5b9a\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"reset"},{"text":"[+1]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/lives_increase"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u521d\\u671f\\u6b8b\\u6a5f\\u30921\\u5897\\u3084\\u3057\\u307e\\u3059\\u3002"}},{"text":"\\n","color":"reset"},{"text":"[infinite]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/lives_infinite"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u6b8b\\u6a5f\\u3092999,999,999\\u306b\\u8a2d\\u5b9a\\u3057\\u307e\\u3059\\u3002(\\u30c7\\u30d0\\u30c3\\u30b0\\u7528)"}}]','["",{"text":"<settings>\\n\\u30fb\\u9003\\u8d70\\u8005\\u306e\\u57fa\\u790e\\u79fb\\u52d5\\u901f\\u5ea6\\n"},{"text":"[50%]","color":"dark_purple","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/move_esc50"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u79fb\\u52d5\\u901f\\u5ea6\\u30921/2\\u306b\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"dark_purple"},{"text":"[100%]","color":"red","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/move_esc100"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u79fb\\u52d5\\u901f\\u5ea6\\u3092\\u7b49\\u500d\\u306b\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"dark_purple"},{"text":"[150%]","color":"dark_purple","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/move_esc150"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u79fb\\u52d5\\u901f\\u5ea6\\u30921.5\\u500d\\u306b\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"dark_purple"},{"text":"[200%]","color":"red","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/move_esc200"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u79fb\\u52d5\\u901f\\u5ea6\\u30922\\u500d\\u306b\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"dark_purple"},{"text":"[300%]","color":"dark_purple","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/move_esc300"},"hoverEvent":{"action":"show_text","contents":"\\u9003\\u8d70\\u8005\\u306e\\u79fb\\u52d5\\u901f\\u5ea6\\u30923\\u500d\\u306b\\u3057\\u307e\\u3059\\u3002"}},{"text":"\\n\\n\\u30fb\\u5fa9\\u6d3b\\u306e\\u304a\\u672d\\u306e\\u51fa\\u73fe\\u983b\\u5ea6\\n","color":"reset"},{"text":"[1\\u5206]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/revive_respawntime1"},"hoverEvent":{"action":"show_text","contents":"\\u304a\\u672d\\u306f1\\u5206\\u3054\\u3068\\u306b\\u51fa\\u73fe\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"reset"},{"text":"[2\\u5206]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/revive_respawntime2"},"hoverEvent":{"action":"show_text","contents":"\\u304a\\u672d\\u306f2\\u5206\\u3054\\u3068\\u306b\\u51fa\\u73fe\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"reset"},{"text":"[3\\u5206]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/revive_respawntime3"},"hoverEvent":{"action":"show_text","contents":"\\u304a\\u672d\\u306f3\\u5206\\u3054\\u3068\\u306b\\u51fa\\u73fe\\u3057\\u307e\\u3059\\u3002"}},{"text":"\\n","color":"reset"},{"text":"[4\\u5206]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/revive_respawntime4"},"hoverEvent":{"action":"show_text","contents":"\\u304a\\u672d\\u306f4\\u5206\\u3054\\u3068\\u306b\\u51fa\\u73fe\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"reset"},{"text":"[5\\u5206]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/revive_respawntime5"},"hoverEvent":{"action":"show_text","contents":"\\u304a\\u672d\\u306f5\\u5206\\u3054\\u3068\\u306b\\u51fa\\u73fe\\u3057\\u307e\\u3059\\u3002"}},{"text":" ","color":"reset"},{"text":"[\\u51fa\\u73fe\\u306a\\u3057]","color":"gray","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/revive_respawntime0"},"hoverEvent":{"action":"show_text","contents":"\\u304a\\u672d\\u306f\\u7d0429826\\u6642\\u9593\\u3054\\u3068\\u306b\\u51fa\\u73fe\\u3057\\u307e\\u3059\\u3002"}}]','["",{"text":"<settings>\\n\\u30fb\\u7d50\\u754c\\u306e\\u304a\\u672d\\u306e\\u679a\\u6570\\n"},{"text":"[\\u306a\\u3057]","color":"gray","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/barriercard_0"},"hoverEvent":{"action":"show_text","contents":"\\u7d50\\u754c\\u306e\\u304a\\u672d\\u306f\\u4f7f\\u3048\\u307e\\u305b\\u3093"}},{"text":" ","color":"reset"},{"text":"[1\\u679a]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/barriercard_1"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b1\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[2\\u679a]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/barriercard_2"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b2\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[3\\u679a]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/barriercard_3"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b3\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[4\\u679a]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/barriercard_4"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b4\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[5\\u679a]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/barriercard_5"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b5\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":"\\n\\n\\u30fb\\u8a8d\\u8b58\\u963b\\u5bb3\\u306e\\u304a\\u672d\\u306e\\u679a\\u6570\\n","color":"reset"},{"text":"[\\u306a\\u3057]","color":"gray","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/invisiblecard_0"},"hoverEvent":{"action":"show_text","contents":"\\u8a8d\\u8b58\\u963b\\u5bb3\\u306e\\u304a\\u672d\\u306f\\u4f7f\\u3048\\u307e\\u305b\\u3093"}},{"text":" ","color":"reset"},{"text":"[1\\u679a]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/invisiblecard_1"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b1\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[2\\u679a]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/invisiblecard_2"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b2\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[3\\u679a]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/invisiblecard_3"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b3\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[4\\u679a]","color":"blue","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/invisiblecard_4"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b4\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}},{"text":" ","color":"reset"},{"text":"[5\\u679a]","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function mizsummer:settings/invisiblecard_5"},"hoverEvent":{"action":"show_text","contents":"\\u30ea\\u30b9\\u30dd\\u30fc\\u30f3\\u6bce\\u306b5\\u679a\\u7372\\u5f97\\u3057\\u307e\\u3059"}}]'],title:GMBook,author:"しめじゅん"}
bossbar set minecraft:time1 players
bossbar set minecraft:time2 players
scoreboard players reset @e[tag=master] gametime
scoreboard players reset @e[tag=master] timelimit
attribute @a[tag=BBA,limit=1] generic.movement_speed base set 0.1
team leave @a
tag @a remove BBA
tag @a remove escape
tag @a remove escaped
tag @a remove dead

gamemode spectator @a[tag=!BBA]
advancement revoke @a only mizsummer:catch
effect give @a weakness 1000000 2 true
function mizsummer:reload
schedule clear mizsummer:ingames/sec
schedule clear mizsummer:timelimits/90s
schedule clear mizsummer:timelimits/60s
schedule clear mizsummer:timelimits/30s
schedule clear mizsummer:timelimits/10s
schedule clear mizsummer:timelimits/9s
schedule clear mizsummer:timelimits/8s
schedule clear mizsummer:timelimits/7s
schedule clear mizsummer:timelimits/6s
schedule clear mizsummer:timelimits/5s
schedule clear mizsummer:timelimits/4s
schedule clear mizsummer:timelimits/3s
schedule clear mizsummer:timelimits/2s
schedule clear mizsummer:timelimits/1s
schedule clear mizsummer:game_end
schedule function mizsummer:gameend_warp 8s
effect clear @a invisibility
scoreboard players set @e[tag=master] revive_respawntime_count 0

#ToDo ゲーム終了後のテレポート処理